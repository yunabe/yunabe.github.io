{"componentChunkName":"component---src-templates-post-js","path":"/docs/html5_ping.html","webpackCompilationHash":"d26e3e4ee56b80f7c341","result":{"data":{"markdownRemark":{"html":"<p>HTML5 では &#x3C;a> タグに ping という属性が定義されており、\nリンクが押された際にリンク先とは別にログ用の URL にリクエストを投げることがです。</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>&lt;target_url><span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ping</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>&lt;logging_url><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>このように指定すると、ユーザがリンクをクリックした際に <code>&#x3C;target_url></code>にナビゲートされるだけでなく 同時に <code>&#x3C;logging_url></code> に <strong>POST</strong>\nリクエストが飛ぶようになります (MIME type に <code>text/ping</code>)。\nこの機能は検索エンジンやまとめサイトのようにユーザを外部のサイトへナビゲートすることが多く、その際にどのリンクが押されたのかをログしたい場合に非常に便利です。</p>\n<p><code>&#x3C;a ping></code> ができるまでは外部サイトへのリンクがクリックされたことをログする方法は大きく分けると以下の 2 つがありました</p>\n<ul>\n<li>まずログ用の URL にユーザをナビゲートし、そこからユーザを目的の外部サイトへリダイレクトする</li>\n<li>リンクが押された際にログ用の URL を <code>src</code> 属性に指定した <code>&#x3C;img></code> タグに動的に作成したり、XMLHttpRequest などで非同期リクエストをログ用の URL に投げる</li>\n</ul>\n<p>しかし前者の方法には、URL リダイレクタにユーザを一度飛ばすため 1 ページロード分ユーザが目的のページに着くのが遅くなってしまうという問題があります。\n一方後者の方法では、<code>&#x3C;img></code> や <code>XMLHttpRequest</code>で指定した URL がロードされるよりも前にページ遷移によって現在のページがアンロードされてしまい、ログ用の URL へのリクエストが行われない可能性があり問題があります。</p>\n<p>しかし<code>&#x3C;a ping></code>を使うと URL リダイレクタを挟む必要が無いのでユーザに余計な時間を使わせることもなく、\n<code>&#x3C;img></code>を使った非同期的な方法と違い現在のページがアンロードされてもログ用 URL へのリクエストはブラウザが行ってくれるのでより確実にログを取ることができるようになります。\n実際、<a href=\"https://plus.google.com/+IlyaGrigorik/posts/fPJNzUf76Nx\">Google は 2013/10 から対応ブラウザでは \"a ping\"を使っていて、それによって 1 クリックにつき 200〜400 [ms]ユーザの時間を節約できています</a>。</p>","tableOfContents":"","frontmatter":{"title":"HTML5 ping 属性","lastmod":"2014-07-25T00:00:00.000Z","enable_toc":null},"fields":{"slug":"/docs/html5_ping.html"}},"site":{"siteMetadata":{"title":"yunabe.jp"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/docs/html5_ping.html"}}}